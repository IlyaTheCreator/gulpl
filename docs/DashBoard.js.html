<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: DashBoard.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: DashBoard.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Widget from "./Widget";

/**
 * @namespace entities
 */

/**
 * DashBoard class - manager for cities list and single city
 * @memberof entities
 */
export default class DashBoard {
  /**
   * @property {Function} createContentWrapper creating markup/styles wrapper for displayed city
   * @param {*} city current city to be displayed
   * @returns {HTMLBodyElement}
   */
  createContentWrapper(city) {
    const contentWrapper = document.createElement("div");

    contentWrapper.innerHTML = `
      &lt;h1 class="screen__header">${city.title}&lt;/h1>
      &lt;p class="screen__date">${new Date(city.date).toDateString()}&lt;/p>
      &lt;div class="screen__weather">
          &lt;img src="${
            city.cityImage
          }" alt="weather image" class="screen__image">
          &lt;p class="screen__temperature">${city.currentTemp}°&lt;/p>
          &lt;p class="screen__weather-type">${city.weatherCondition}&lt;/p>
      &lt;/div>
    `;

    return contentWrapper;
  }

  /**
   * @property {Function} createCloseCityBtn creating btn for closing current city
   * @returns {HTMLBodyElement}
   */
  createCloseCityBtn() {
    const btn = document.createElement("button");

    btn.classList.add("close-city-btn");
    btn.id = "cityCloseBtn";

    btn.innerHTML = `
      &lt;i class="icon-cancel-squared">&lt;/i>
    `;

    return btn;
  }

  /**
   * @property {Function} createCityInfoGrid creating wrapper for city's widgets
   * @returns {HTMLBodyElement}
   */
  createCityInfoGrid() {
    const cityInfoGrid = document.createElement("div");

    cityInfoGrid.classList.add("city-info-grid");

    return cityInfoGrid;
  }

  /**
   * @property {Function} createCityWidgetContent creating innerHTMl of a city widget
   * @returns {string}
   */
  createCityWidgetContent(cityData, key) {
    return `
      &lt;p class="city-info-grid__widget-description">${
        cityData[key].name
      }&lt;/p>
      &lt;div class="city-info-grid__content-wrapper city-info-grid__content-wrapper--margin-bottom">
          &lt;p class="city-info-grid__widget-number">${
            cityData[key].value
          }&lt;/p>
          ${
            cityData[key].text
              ? `&lt;p class="city-info-grid__widget-data">${cityData[key].text}&lt;/p>`
              : ""
          }
          ${
            cityData[key].additional
              ? `&lt;p class="city-info-grid__widget-additional">${cityData[key].additional}&lt;/p>`
              : ""
          }
      &lt;/div>
     `;
  }

  /**
   * @property {Function} createCity creating current city page
   * @param {Object} citiesData current cities data
   * @param {Object} currentCity current city data
   * @returns {HTMLBodyElement}
   */
  createCity(citiesData, currentCity) {
    const contentWrapper = this.createContentWrapper(currentCity);
    const cityInfoGrid = this.createCityInfoGrid();
    const cityDataWidgets = Object.keys(citiesData).map((key) => {
      const content = this.createCityWidgetContent(currentCity, key);

      return Widget.create(content, "city");
    });

    contentWrapper.classList.add("city-info-modal");

    cityDataWidgets.forEach((widget) => {
      widget.classList.add("city-info-grid__grid-item");
      cityInfoGrid.appendChild(widget);
    });

    contentWrapper.appendChild(cityInfoGrid);

    return contentWrapper;
  }

  /**
   * @property {Function} createContent creating initial content innerHTML for city page
   * @param {Object} city current city
   * @returns {string}
   */
  createContent(city) {
    return `
      &lt;a class="link" href="#">
        &lt;h3 class="screen__title">
          &lt;div className="screen__city-title-group">
            &lt;span class="screen__city-name">${city.title}&lt;/span>
            &lt;p class="screen__city-time">${new Date(city.date).toDateString()}&lt;/p>
          &lt;/div>
          &lt;span class="screen__city-temperature">${city.currentTemp}°&lt;/span>
        &lt;/h3>
        &lt;div class="screen__city-info">
          &lt;span class="screen__city-weather-condition">${city.weatherCondition}&lt;/span>
          &lt;span class="screen__city-temperature-range">Max. ${city.maxTemp.value} Min. ${city.minTemp.value}&lt;/span>
        &lt;/div>
      &lt;/a>
    `;
  }

  /**
   * @property {Function} createCityList creating city list page
   * @param {Object} cities current cities data
   * @param {Function} onCityWidgetClick Individual city widget's onClick handler
   * @returns {Array&lt;HTMLBodyElement>}
   */
  createCityList(cities, onCityWidgetClick) {
    return cities.map((city) => {
      const onClick = () => {
        onCityWidgetClick(city);
      };

      const cityWidget = Widget.create(
        this.createContent(city),
        "list",
        onClick,
        ["screen__city"]
      );

      return cityWidget;
    });
  }

  /**
   * @property {Function} createAddBtn creates button to add a city
   * @returns {HTMLBodyElement}
   */
  createAddBtn() {
    const btn = document.createElement("button");

    btn.classList.add("btn");
    btn.classList.add("widget");
    btn.classList.add("screen__add-btn");

    btn.innerHTML = `
      &lt;i class="icon-figma-plus">&lt;/i>
    `;

    return btn;
  }

  /**
   * @property {Function} createEmptyListMessage creating message of empty city list
   * @returns {HTMLBodyElement}
   */
  createEmptyListMessage() {
    const container = document.createElement("div");

    container.classList.add("empty-city-list-container");

    container.innerHTML = `
      &lt;p class="empty-city-list-container__text">
        It seems like you don't have any cities selected.
        Let's add one!
      &lt;/p>
    `;

    return container;
  }

  /**
   * @property {Function} generateCityList preparing city list to be attached to the dom
   * @returns {HTMLBodyElement}
   */
  generateCityList() {
    const cities = this.getCities();

    if (cities.length === 0) {
      return this.createEmptyListMessage();
    }

    const list = this.createCityList(cities, this.onCityWidgetClick);
    const listWrapper = document.createElement("div");

    listWrapper.classList.add("city-list");

    list.forEach((item) => listWrapper.appendChild(item));

    return listWrapper;
  }

  /**
   * @property {Function} generateCityInfo preparing single city page to be attached to the dom
   * @returns {HTMLBodyElement}
   */
  generateCityInfo() {
    const currentSettingsState = this.getSettingsState();

    const filteredCityWidgets = {};

    Object.keys(currentSettingsState)
      .filter((key) => {
        return currentSettingsState[key].isActive;
      })
      .forEach((key) => {
        filteredCityWidgets[key] = this.widgetsData[key];
      });

    return this.createCity(filteredCityWidgets, this.getCurrentCity());
  }

  /**
   * @property {Function} generateDashBoard preparing entire dashboard to be attached to the dom
   * @returns {Array&lt;HTMLBodyElement>}
   */
  generateDashBoard() {
    const output = [];

    const cityList = this.generateCityList(
      this.getCities(),
      this.onCityWidgetClick
    );

    if (this.showCityInfo) {
      output.push(this.createCloseCityBtn());
      output.push(this.generateCityInfo());
    } else {
      cityList.appendChild(this.createAddBtn());
    }

    output.push(cityList);

    return output;
  }

  /**
   * @property {Function} create getting the required methods from the app and connecting to it
   * @param {Function} onCityWidgetClick 
   * @param {Function} getCities 
   * @param {Function} getCurrentCity 
   * @param {Function} getSettingsState 
   * @param {Function} widgetsData 
   * @param {Function} showCityInfo 
   * @returns {Array&lt;HTMLBodyElement>}
   */
  create(
    onCityWidgetClick,
    getCities,
    getCurrentCity,
    getSettingsState,
    widgetsData,
    showCityInfo
  ) {
    /**
     * @property {Function} onCityWidgetClick check App class for more information
     */
    this.onCityWidgetClick = onCityWidgetClick;
    /**
     * @property {Function} getCities check App class for more information
     */
    this.getCities = getCities;
    /**
     * @property {Function} getCurrentCity check App class for more information
     */
    this.getCurrentCity = getCurrentCity;
    /**
     * @property {Function} getSettingsState check App class for more information
     */
    this.getSettingsState = getSettingsState;
    /**
     * @property {Function} widgetsData check App class for more information
     */
    this.widgetsData = widgetsData;
    /**
     * @property {Function} showCityInfo check App class for more information
     */
    this.showCityInfo = showCityInfo;

    return this.generateDashBoard();
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="entities.html">entities</a></li></ul><h3>Classes</h3><ul><li><a href="entities.module.exports.html">module.exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#clear">clear</a></li><li><a href="global.html#clearRootElement">clearRootElement</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#createAddBtn">createAddBtn</a></li><li><a href="global.html#createCity">createCity</a></li><li><a href="global.html#createCityInfoGrid">createCityInfoGrid</a></li><li><a href="global.html#createCityList">createCityList</a></li><li><a href="global.html#createCityWidgetContent">createCityWidgetContent</a></li><li><a href="global.html#createCloseCityBtn">createCloseCityBtn</a></li><li><a href="global.html#createContent">createContent</a></li><li><a href="global.html#createContentWrapper">createContentWrapper</a></li><li><a href="global.html#createEmptyListMessage">createEmptyListMessage</a></li><li><a href="global.html#createNavigation">createNavigation</a></li><li><a href="global.html#createSettingItem">createSettingItem</a></li><li><a href="global.html#createSettings">createSettings</a></li><li><a href="global.html#delete">delete</a></li><li><a href="global.html#generateCityInfo">generateCityInfo</a></li><li><a href="global.html#generateCityList">generateCityList</a></li><li><a href="global.html#generateDashBoard">generateDashBoard</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#list">list</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setCurrentCity">setCurrentCity</a></li><li><a href="global.html#setEventListeners">setEventListeners</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Tue Feb 15 2022 10:09:20 GMT+0300 (Moscow Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
